function CapsList(e,n){"string"==typeof e&&(e=this._getObjectFromPatch(e)),this.target=e,this.caps=n}function Fix(){this.vendorPrefixes=["WebKit","webkit","Moz","moz","ms","O"]}function Notification(){var e=this,n=this._createElement("div",{display:"block",position:"fixed",width:"100%",height:"auto",overflow:"hidden",top:"0",left:"0",fontFamily:"Tahoma, Verdana, Arial, sans-serif",color:"white",textShadow:"0 1px 2px #000",textAlign:"center",backgroundColor:"#444",boxShadow:"0 0 20px #000",zIndex:"2147483647"}),t=this._createElement("h1",{display:"block",width:"100%",margin:"10px",fontWeight:"100",fontSize:"20px",textAlign:"center"});t.innerHTML=Notification.HEADER_TEXT;var l=this._createElement("a",{display:"inline-block",padding:"85px 0 10px",margin:"10px 0 0",width:"200px",border:"5px solid #333",color:"#333",backgroundAttachment:"scroll",backgroundPosition:"50% 15px",backgroundRepeat:"no-repeat",backgroundImage:"url(//vk.com/images/chrome.gif)",backgroundColor:"rgb(242, 244, 255)",cursor:"pointer",textShadow:"none"});l.innerHTML="Google Chrome",l.href="//www.google.com/chrome/";var i=this._createElement("p",{display:"block",width:"100%",padding:"0 10px 5px",color:"#999",textAlign:"left"}),o=this._createElement("span",{display:"inline",width:"auto",color:"#999",textDecoration:"underline",fontSize:"17px",cursor:"pointer"});o.innerHTML=Notification.DETAILS_TEXT,o.onclick=function(){e._onclickDetails()};var r=this._createElement("ul",{display:"none",margin:"10px 50px",listStyle:"square outside",fontSize:"20px",textAlign:"left"}),a=this._createElement("div",{display:"block",width:"100%",height:"25px",color:"white",fontSize:"20px",borderBottom:"1px solid #555",textAlign:"center",backgroundColor:"#333",cursor:"pointer"});a.innerHTML=Notification.CLOSE_TEXT,a.onclick=function(){e.close()},n.appendChild(t),n.appendChild(l),i.appendChild(o),n.appendChild(i),n.appendChild(r),n.appendChild(a),this.isOpened=!1,this.isOpenedDetails=!1,this.detailsList=[],this.HTMLContainer=n,this.HTMLHeader=t,this.HTMLChrome=l,this.HTMLShowDetailsP=i,this.HTMLShowDetailsSpan=o,this.HTMLDetailsList=r,this.HTMLCloseButton=a}CapsList.oncantgettarget=null,CapsList.cantReadPropertiesList=[],CapsList.addEventListener=function(e){var n=CapsList.cantReadPropertiesList;if(n.length)for(var t=0;n.length>t;t++)e.call(CapsList,n[t]);CapsList.oncantgettarget=e},CapsList._cantReadProperty=function(e){CapsList.oncantgettarget instanceof Function?CapsList.oncantgettarget(e):CapsList.cantReadPropertiesList.push(e)},CapsList.prototype._getObjectFromPatch=function(e){for(var n=window,t=e.split("."),l=[],i=0;t.length>i;i++){var o=t[i];if(l.push(o),void 0===n[o]||null===n[o]){var r=l.join(".");return CapsList._cantReadProperty(r),null}n=n[o]}return n},Fix._onproblem=null,Fix._problemsBuffer=[],Fix.addEventListener=function(e){var n=Fix._problemsBuffer;if(n.length)for(var t=0;n.length>t;t++){var l=n[t];e.call(this,l)}this._onproblem=e},Fix.prototype.addPropertyCaps=function(e){var n=e.target,t=e.caps;if(n)for(var l in t)if(!(l in n)){var i=this._detectWorkingKey(n,l);if(i)n[l]=n[i];else{var o=t[l];if(o){n[l]=o;continue}this._addProblemGetter(n,l)}}},Fix.prototype._addProblemGetter=function(e,n){var t=this;this._defineProperty(e,n,{get:function(){return t._problemDetected(e,n)},set:function(e){return t._defineProperty(this,n,{value:e}),e}})},Fix.prototype.addProxyCaps=function(e){var n=e.target,t=e.caps;if(n)for(var l in t)if(!(l in n)){var i=t[l];this._addProxyCap(n,l,i)}},Fix.prototype._addProxyCap=function(e,n,t){var l,i=this;if(t)var o=t.aliases,r=t.value,a=t.get,u=t.set;if(a||u)var s=!0;if(r)var c=!0;this._defineProperty(e,n,{get:function(){return l||(l=i._detectWorkingKey(this,n,o))?this[l]:s?a.call(this):c?r:i._problemDetected(e,n)},set:function(t){return l||(l=i._detectWorkingKey(this,n,o))?this[l]=t:s?u.call(this,t):(i._problemDetected(e,n),t)}})},Fix.prototype._defineProperty=function(e,n,t){return"defineProperty"in Object?Object.defineProperty(e,n,t):(this._problemDetected(Object,"Object.defineProperty"),void 0)},Fix.prototype._detectWorkingKey=function(e,n,t){var l=this._detectPrefix(e,n);if(l)return this._attachPrefixToKey(l,n);if(t)for(var i=0;t.length>i;i++){var o=t[i];if(o in e)return o;var r=this._detectPrefix(e,o);if(r)return this._attachPrefixToKey(r,o)}return!1},Fix.prototype._detectPrefix=function(e,n){for(var t=this.vendorPrefixes,l=0;t.length>l;l++){var i=t[l],o=this._attachPrefixToKey(i,n);if(o in e)return i}return!1},Fix.prototype._attachPrefixToKey=function(e,n){var t=n.substr(0,1).toUpperCase();return e+t+n.substr(1)},Fix.prototype.override=function(){},Fix.prototype._problemDetected=function(e,n){return Fix._onproblem instanceof Function?Fix._onproblem(n):Fix._problemsBuffer.push(n),function(){}},Fix.prototype.triggerDetectOldBrowser=function(e){this._problemDetected(null,e)},Notification.HEADER_TEXT="Вообще-то, ваш браузер довольно сильно устарел.<br>Для нормального просмотра сайта обновите его например на:",Notification.DETAILS_TEXT="Что именно не поддерживает мой браузер?",Notification.CLOSE_TEXT="закрыть",Notification.prototype._createElement=function(e,n){var t=document.createElement(e);t.style.backgroundColor="transparent",t.style.border="none",t.style.margin="0",t.style.padding="0";for(var l in n)t.style[l]=n[l];return t},Notification.prototype.addMessage=function(e){for(var n=this.detailsList,t=0;n.length>t;t++)if(e===n[t])return;n.push(e),this._addDetail(e),this.open()},Notification.prototype.open=function(){var e=this,n=this.HTMLContainer,t=document.body,l=navigator.userAgent,i=this.isOpened;if(i!==!0){if(/MSIE/.test(l)){if(!t)return window.onload=function(){e.open()},void 0;t.insertBefore(n,t.firstChild)}else t.appendChild(n);this.isOpened=!0}},Notification.prototype.close=function(){var e=this.HTMLContainer,n=this.HTMLDetailsList,t=this.isOpened;t!==!1&&(e.parentNode.removeChild(e),n.innerHTML="")},Notification.prototype._onclickDetails=function(){var e=this.HTMLDetailsList,n=this.isOpenedDetails;return e.style.display=n?"none":"block",this.isOpenedDetails=!n,!1},Notification.prototype._addDetail=function(e){var n=this.HTMLDetailsList,t=document.createElement("li");t.innerHTML=e,n.appendChild(t)};var proxyCss=new CapsList("CSSStyleDeclaration.prototype",{alignContent:null,alignItems:null,alignSelf:null,animation:null,animationDelay:null,animationDirection:null,animationDuration:null,animationFillMode:null,animationIterationCount:null,animationName:null,animationPlayState:null,animationTimingFunction:null,appRegion:null,appearance:null,aspectRatio:null,backfaceVisibility:null,backgroundComposite:null,backgroundOrigin:null,backgroundSize:null,borderAfter:null,borderAfterColor:null,borderAfterStyle:null,borderAfterWidth:null,borderBefore:null,borderBeforeColor:null,borderBeforeStyle:null,borderBeforeWidth:null,borderEnd:null,borderEndColor:null,borderEndStyle:null,borderEndWidth:null,borderFit:null,borderHorizontalSpacing:null,borderImage:null,borderRadius:null,borderStart:null,borderStartColor:null,borderStartStyle:null,borderStartWidth:null,borderVerticalSpacing:null,boxAlign:null,boxDecorationBreak:null,boxDirection:null,boxFlex:null,boxFlexGroup:null,boxLines:null,boxOrdinalGroup:null,boxOrient:null,boxPack:null,boxShadow:null,clipPath:null,colorCorrection:null,columnAxis:null,columnBreakAfter:null,columnBreakBefore:null,columnBreakInside:null,columnCount:null,columnGap:null,columnProgression:null,columnRule:null,columnRuleColor:null,columnRuleStyle:null,columnRuleWidth:null,columnSpan:null,columnWidth:null,columns:null,filter:null,flex:null,flexBasis:null,flexDirection:null,flexFlow:null,flexGrow:null,flexShrink:null,flexWrap:null,flowFrom:null,flowInto:null,fontFeatureSettings:null,fontKerning:null,fontSizeDelta:null,fontSmoothing:null,fontVariantLigatures:null,gridAfter:null,gridAutoColumns:null,gridAutoFlow:null,gridAutoRows:null,gridBefore:null,gridColumn:null,gridColumns:null,gridEnd:null,gridRow:null,gridRows:null,gridStart:null,highlight:null,hyphenateCharacter:null,hyphenateLimitAfter:null,hyphenateLimitBefore:null,hyphenateLimitLines:null,hyphens:null,justifyContent:null,lineAlign:null,lineBoxContain:null,lineBreak:null,lineClamp:null,lineGrid:null,lineSnap:null,locale:null,logicalHeight:null,logicalWidth:null,marginAfter:null,marginAfterCollapse:null,marginBefore:null,marginBeforeCollapse:null,marginBottomCollapse:null,marginCollapse:null,marginEnd:null,marginStart:null,marginTopCollapse:null,marquee:null,marqueeDirection:null,marqueeIncrement:null,marqueeRepetition:null,marqueeSpeed:null,marqueeStyle:null,mask:null,maskBoxImage:null,maskBoxImageOutset:null,maskBoxImageRepeat:null,maskBoxImageSlice:null,maskBoxImageSource:null,maskBoxImageWidth:null,maskClip:null,maskComposite:null,maskImage:null,maskOrigin:null,maskPosition:null,maskPositionX:null,maskPositionY:null,maskRepeat:null,maskRepeatX:null,maskRepeatY:null,maskSize:null,maxLogicalHeight:null,maxLogicalWidth:null,minLogicalHeight:null,minLogicalWidth:null,nbspMode:null,order:null,paddingAfter:null,paddingBefore:null,paddingEnd:null,paddingStart:null,perspective:null,perspectiveOrigin:null,perspectiveOriginX:null,perspectiveOriginY:null,printColorAdjust:null,regionBreakAfter:null,regionBreakBefore:null,regionBreakInside:null,regionOverflow:null,rtlOrdering:null,rubyPosition:null,shapeInside:null,shapeMargin:null,shapeOutside:null,shapePadding:null,svgShadow:null,tapHighlightColor:null,textCombine:null,textDecorationsInEffect:null,textEmphasis:null,textEmphasisColor:null,textEmphasisPosition:null,textEmphasisStyle:null,textFillColor:null,textOrientation:null,textSecurity:null,textStroke:null,textStrokeColor:null,textStrokeWidth:null,transform:null,transformOrigin:null,transformOriginX:null,transformOriginY:null,transformOriginZ:null,transformStyle:null,transition:null,transitionDelay:null,transitionDuration:null,transitionProperty:null,transitionTimingFunction:null,userDrag:null,userModify:null,userSelect:null,wrap:null,wrapFlow:null,wrapThrough:null,writingMode:null}),objectDefineProperty=new CapsList("Object",{defineProperty:function(e){return function(n){try{return e.apply(this,arguments)}catch(t){var l=n===window,i=n instanceof window.HTMLDocument,o=n instanceof window.Element,r=n instanceof window.Event,a=!(l||i||o||r);throw a&&fix.triggerDetectOldBrowser("defineProperty"),t}}}}),propertyFunction=new CapsList("Function.prototype",{bind:function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var n=Array.prototype.slice.call(arguments,1),t=this,l=function(){},i=function(){return t.apply(this instanceof l&&e?this:e,n.concat(Array.prototype.slice.call(arguments)))};return l.prototype=this.prototype,i.prototype=new l,i}}),propertyArray=new CapsList("Array.prototype",{indexOf:function(e){for(var n=0;this.length>n;n++)if(this[n]===e)return n;return-1}}),propertyElement=new CapsList("Element.prototype",{addEventListener:function(e,n,t){var l=this;return this.attachEvent("on"+e,function(){n.apply(l,arguments)},t)},removeEventListener:function(e,n,t){var l=this;return this.detachEvent("on"+e,function(){n.apply(l,arguments)},t)},onfullscreenchange:{aliases:["onwebkitfullscreenchange","onmozfullscreenchange"]},onfullscreenerror:{aliases:["onwebkitfullscreenerror","onmozfullscreenerror"]},onpointerlockchange:{aliases:["onwebkitpointerlockchange","onmozfullscreenchange"]},onpointerlockerror:{aliases:["onwebkitpointerlockerror","onmozfullscreenchange"]}}),proxyElement=new CapsList("Element.prototype",{createShadowRoot:null,getRegionFlowRanges:null,querySelectorAll:null,matchesSelector:{value:function(e){for(var n=this.parentNode.querySelectorAll(e),t=0;n.length>t;t++)if(n[t]===this)return!0;return!1}},requestFullscreen:{aliases:["requestFullScreen"]},requestPointerLock:null}),proxyDocument=new CapsList("document",{cancelFullscreen:{aliases:["cancelFullScreen","exitFullScreen","exitFullscreen"]},exitPointerLock:{aliases:["exitPointerlock","cancelPointerLock","cancelPointerlock"]},pointerLockElement:null}),overrideElement=function(){function e(e){return function(t,l,i){for(var o=0;n.length>o;o++)e.call(this,n[o]+t,l,i);e.apply(this,arguments)}}var n=["webkit","moz"];return new CapsList("Element.prototype",{addEventListener:e,removeEventListener:e})}(),proxyEvent=function(){function e(n){var t=e.elements.indexOf(n);return-1===t&&(t=e.elements.push(n)-1),"_hash:"+t}function n(n,t){var l=e(n.target),i=e.oldEventCoordinates[l];void 0===i&&(i={x:0,y:0},"mousemove"==n.type&&(e.oldEventCoordinates[l]=i));var o=n["screen"+t.toUpperCase()],r=o-i[t];return i[t]=o,r}return e.elements=[],e.oldEventCoordinates=[],new CapsList("Event.prototype",{movementX:{get:function(){return n(this,"x")}},movementY:{get:function(){return n(this,"y")}}})}(),propertyWindow=new CapsList("window",{AnimationEvent:null,CSSFilterRule:null,CSSFilterValue:null,CSSKeyframeRule:null,CSSKeyframesRule:null,CSSMatrix:null,CSSMixFunctionValue:null,CSSRegionRule:null,CSSTransformValue:null,IDBCursor:null,IDBDatabase:null,IDBFactory:null,IDBIndex:null,IDBKeyRange:null,IDBObjectStore:null,IDBRequest:null,IDBTransaction:null,MediaSource:null,MutationObserver:null,Point:null,RTCPeerConnection:null,ShadowRoot:null,SourceBuffer:null,SourceBufferList:null,TransitionEvent:null,URL:null,Worker:null,audioContext:null,audioPannerNode:null,cancelAnimationFrame:null,cancelRequestAnimationFrame:function(e){return clearTimeout(e)},convertPointFromNodeToPage:null,convertPointFromPageToNode:null,indexedDB:null,mediaStream:null,notifications:null,offlineAudioContext:null,requestAnimationFrame:function(e){return setTimeout(e,1e3/60)},requestFileSystem:null,resolveLocalFileSystemURL:null,speechGrammar:null,speechGrammarList:null,speechRecognition:null,speechRecognitionError:null,speechRecognitionEvent:null}),fix=new Fix,notification=new Notification;Fix.addEventListener(function(e){notification.addMessage(e)}),CapsList.addEventListener(function(e){notification.addMessage(e)}),fix.addPropertyCaps(propertyWindow),fix.addPropertyCaps(propertyArray),fix.addPropertyCaps(propertyFunction),fix.addPropertyCaps(propertyElement),fix.addProxyCaps(proxyCss),fix.addProxyCaps(proxyEvent),fix.addProxyCaps(proxyElement),fix.addProxyCaps(proxyDocument),fix.override(overrideElement),/MSIE 8/.test(navigator.userAgent)&&fix.override(objectDefineProperty);